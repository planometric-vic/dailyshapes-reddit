<!DOCTYPE html>
<html>
<head>
    <title>Supabase Flag Timing Test</title>
</head>
<body>
    <h1>Supabase Flag Timing Test</h1>
    <div id="results"></div>

    <!-- Load in exact same order as main index.html -->
    <script src="main.js"></script>
    <script src="supabase-config.js"></script>
    <script src="supabase-shape-init.js"></script>

    <script>
        const results = document.getElementById('results');

        function log(msg) {
            const div = document.createElement('div');
            div.innerHTML = msg;
            results.appendChild(div);
            console.log(msg);
        }

        // Check initial state
        log('ğŸ“ Script load order test started');
        log('ğŸ“ Initial window.supabaseIntegrationActive: ' + window.supabaseIntegrationActive);

        // Check after short delay
        setTimeout(() => {
            log('ğŸ“ After 100ms: ' + window.supabaseIntegrationActive);
        }, 100);

        setTimeout(() => {
            log('ğŸ“ After 500ms: ' + window.supabaseIntegrationActive);
        }, 500);

        setTimeout(() => {
            log('ğŸ“ After 1000ms: ' + window.supabaseIntegrationActive);
        }, 1000);

        setTimeout(() => {
            log('ğŸ“ After 2000ms: ' + window.supabaseIntegrationActive);

            if (window.supabaseIntegrationActive) {
                log('âœ… SUCCESS: Supabase integration flag is set');
            } else {
                log('âŒ FAIL: Supabase integration flag not set');
            }
        }, 2000);
    </script>
</body>
</html>